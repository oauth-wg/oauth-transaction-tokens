<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Transaction Tokens</title>
<meta content="Atul Tulshibagwale" name="author">
<meta content="George Fletcher" name="author">
<meta content="Pieter Kasselman" name="author">
<meta content="
       Transaction Tokens (Txn-Tokens) are designed to maintain and propagate user identity and authorization context across workloads within a trusted domain during the processing of external programmatic requests, such as API calls. They ensure that this context is preserved throughout the call chain, even when new transactions are initiated internally, thereby enhancing security and consistency in complex, multi-service architectures. 
    " name="description">
<meta content="xml2rfc 3.30.1" name="generator">
<meta content="Microservices" name="keyword">
<meta content="OAuth" name="keyword">
<meta content="JWT" name="keyword">
<meta content="token exchange" name="keyword">
<meta content="draft-ietf-oauth-transaction-tokens-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.30.1
    Python 3.12.11
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 5.3.1
    platformdirs 4.4.0
    pycountry 24.6.1
    PyYAML 6.0.2
    requests 2.32.5
    setuptools 80.9.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-oauth-transaction-tokens.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl:not(.dlNewline) > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    /* In the horizontal direction, sometimes people make over-sized figures.
       Scrollbars for those is therefore necessary: auto adds them as necessary..
       In the vertical direction, the line-height can combine with the font
       asender/descender height to produce scrollbars: hidden avoids that. */
    overflow: auto hidden;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "⇒";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Txn-Tokens</td>
<td class="right">September 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Tulshibagwale, et al.</td>
<td class="center">Expires 20 March 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">oauth</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-oauth-transaction-tokens-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-09-16" class="published">16 September 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-03-20">20 March 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Tulshibagwale</div>
<div class="org">SGNL</div>
</div>
<div class="author">
      <div class="author-name">G. Fletcher</div>
<div class="org">Practical Identity LLC</div>
</div>
<div class="author">
      <div class="author-name">P. Kasselman</div>
<div class="org">SPIRL</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Transaction Tokens</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Transaction Tokens (Txn-Tokens) are designed to maintain and propagate user identity and authorization context across workloads within a trusted domain during the processing of external programmatic requests, such as API calls. They ensure that this context is preserved throughout the call chain, even when new transactions are initiated internally, thereby enhancing security and consistency in complex, multi-service architectures.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://drafts.oauth.net/oauth-transaction-tokens/draft-ietf-oauth-transaction-tokens.html">https://drafts.oauth.net/oauth-transaction-tokens/draft-ietf-oauth-transaction-tokens.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-oauth-transaction-tokens/">https://datatracker.ietf.org/doc/draft-ietf-oauth-transaction-tokens/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/oauth-wg/oauth-transaction-tokens">https://github.com/oauth-wg/oauth-transaction-tokens</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 March 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-overview" class="internal xref">Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-what-are-transaction-tokens" class="internal xref">What are Transaction Tokens?</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-creating-txn-tokens" class="internal xref">Creating Txn-Tokens</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1" class="keepWithNext"><a href="#section-2.2.1" class="auto internal xref">2.2.1</a>.  <a href="#name-initial-creation" class="internal xref">Initial Creation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="auto internal xref">2.2.2</a>.  <a href="#name-replacement-txn-tokens" class="internal xref">Replacement Txn-Tokens</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-txn-token-lifetime" class="internal xref">Txn-Token Lifetime</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-benefits-of-txn-tokens" class="internal xref">Benefits of Txn-Tokens</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-txn-token-issuance-and-usag" class="internal xref">Txn-Token Issuance and Usage Flows</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.1">
                    <p id="section-toc.1-1.2.2.5.2.1.1"><a href="#section-2.5.1" class="auto internal xref">2.5.1</a>.  <a href="#name-basic-flow" class="internal xref">Basic Flow</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5.2.2">
                    <p id="section-toc.1-1.2.2.5.2.2.1"><a href="#section-2.5.2" class="auto internal xref">2.5.2</a>.  <a href="#name-replacement-txn-token-flow" class="internal xref">Replacement Txn-Token Flow</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-txn-token-format" class="internal xref">Txn-Token Format</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-jwt-header" class="internal xref">JWT Header</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-jwt-body-claims" class="internal xref">JWT Body Claims</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.1">
                    <p id="section-toc.1-1.5.2.2.2.1.1"><a href="#section-5.2.1" class="auto internal xref">5.2.1</a>.  <a href="#name-purpose-claim" class="internal xref">Purpose claim</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.2">
                    <p id="section-toc.1-1.5.2.2.2.2.1"><a href="#section-5.2.2" class="auto internal xref">5.2.2</a>.  <a href="#name-requester-context" class="internal xref">Requester Context</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.3">
                    <p id="section-toc.1-1.5.2.2.2.3.1"><a href="#section-5.2.3" class="auto internal xref">5.2.3</a>.  <a href="#name-transaction-context" class="internal xref">Transaction Context</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2.2.4">
                    <p id="section-toc.1-1.5.2.2.2.4.1"><a href="#section-5.2.4" class="auto internal xref">5.2.4</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-txn-token-service" class="internal xref">Txn-Token Service</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-requesting-txn-tokens" class="internal xref">Requesting Txn-Tokens</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-txn-token-request" class="internal xref">Txn-Token Request</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-subject-token-types" class="internal xref">Subject Token Types</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="auto internal xref">7.2.1</a>.  <a href="#name-self-signed-subject-token-t" class="internal xref">Self-Signed Subject Token Type</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="auto internal xref">7.2.2</a>.  <a href="#name-unsigned-json-object-subjec" class="internal xref">Unsigned JSON Object Subject Token Type</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-txn-token-request-processin" class="internal xref">Txn-Token Request Processing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-txn-token-response" class="internal xref">Txn-Token Response</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
                <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-creating-replacement-txn-to" class="internal xref">Creating Replacement Txn-Tokens</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.1">
                    <p id="section-toc.1-1.7.2.5.2.1.1"><a href="#section-7.5.1" class="auto internal xref">7.5.1</a>.  <a href="#name-txn-token-service-responsib" class="internal xref">Txn-Token Service Responsibilities</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.2">
                    <p id="section-toc.1-1.7.2.5.2.2.1"><a href="#section-7.5.2" class="auto internal xref">7.5.2</a>.  <a href="#name-replacement-txn-token-reque" class="internal xref">Replacement Txn-Token Request</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5.2.3">
                    <p id="section-toc.1-1.7.2.5.2.3.1"><a href="#section-7.5.3" class="auto internal xref">7.5.3</a>.  <a href="#name-replacement-txn-token-respo" class="internal xref">Replacement Txn-Token Response</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
                <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="auto internal xref">7.6</a>.  <a href="#name-mutual-authentication-of-th" class="internal xref">Mutual Authentication of the Txn-Token Request</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-using-txn-tokens" class="internal xref">Using Txn-Tokens</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-txn-token-http-header" class="internal xref">Txn-Token HTTP Header</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-txn-token-lifetime-2" class="internal xref">Txn-Token Lifetime</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-access-tokens" class="internal xref">Access Tokens</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.  <a href="#name-subject-token-types-2" class="internal xref">Subject Token Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="auto internal xref">9.4</a>.  <a href="#name-client-authentication" class="internal xref">Client Authentication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.5">
                <p id="section-toc.1-1.9.2.5.1"><a href="#section-9.5" class="auto internal xref">9.5</a>.  <a href="#name-replacement-tokens" class="internal xref">Replacement Tokens</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.6">
                <p id="section-toc.1-1.9.2.6.1"><a href="#section-9.6" class="auto internal xref">9.6</a>.  <a href="#name-scope-and-purpose-processin" class="internal xref">Scope and Purpose processing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.7">
                <p id="section-toc.1-1.9.2.7.1"><a href="#section-9.7" class="auto internal xref">9.7</a>.  <a href="#name-identifying-a-transaction-t" class="internal xref">Identifying a Transaction Throughout a Call Chain</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.8">
                <p id="section-toc.1-1.9.2.8.1"><a href="#section-9.8" class="auto internal xref">9.8</a>.  <a href="#name-transaction-token-service-d" class="internal xref">Transaction Token Service Discovery</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.9">
                <p id="section-toc.1-1.9.2.9.1"><a href="#section-9.9" class="auto internal xref">9.9</a>.  <a href="#name-workload-configuration-prot" class="internal xref">Workload Configuration Protection</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.10">
                <p id="section-toc.1-1.9.2.10.1"><a href="#section-9.10" class="auto internal xref">9.10</a>. <a href="#name-transaction-token-service-a" class="internal xref">Transaction Token Service Authentication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.11">
                <p id="section-toc.1-1.9.2.11.1"><a href="#section-9.11" class="auto internal xref">9.11</a>. <a href="#name-transaction-token-service-k" class="internal xref">Transaction Token Service Key Rotation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.12">
                <p id="section-toc.1-1.9.2.12.1"><a href="#section-9.12" class="auto internal xref">9.12</a>. <a href="#name-transaction-tokens-are-not-" class="internal xref">Transaction Tokens Are Not Authentication Credentials</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-obfuscation-of-personal-inf" class="internal xref">Obfuscation of Personal Information</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-logging" class="internal xref">Logging</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-oauth-uri-subregistry-conte" class="internal xref">OAuth URI Subregistry Contents</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-jwt-claims-registry-content" class="internal xref">JWT Claims Registry Contents</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="auto internal xref">11.3</a>.  <a href="#name-iana-media-type-registratio" class="internal xref">IANA Media Type Registration Contents</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.4">
                <p id="section-toc.1-1.11.2.4.1"><a href="#section-11.4" class="auto internal xref">11.4</a>.  <a href="#name-http-header" class="internal xref">HTTP Header</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-document-history" class="internal xref">Document History</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#appendix-B.1" class="auto internal xref"></a><a href="#name-since-draft-06" class="internal xref">Since Draft 06</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#appendix-B.2" class="auto internal xref"></a><a href="#name-since-draft-05" class="internal xref">Since Draft 05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14.2.3">
                <p id="section-toc.1-1.14.2.3.1"><a href="#appendix-B.3" class="auto internal xref"></a><a href="#name-since-draft-04" class="internal xref">Since Draft 04</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Modern computing architectures often use multiple independently running components called workloads. In many cases, external invocations through externally visible interfaces such as APIs result in a number of internal workloads being invoked in order to process the external invocation. These workloads often run in virtually or physically isolated networks. These networks and the workloads running within their perimeter may be compromised by attackers through software supply chain, privileged user compromise or other attacks. Workloads compromised through external attacks, malicious insiders or software errors can cause any or all of the following unauthorized actions:<a href="#section-1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-2.1">
          <p id="section-1-2.1.1">Invocations of workloads in the network without any explicit transaction invocation (external or internal) being present<a href="#section-1-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-2.2">
          <p id="section-1-2.2.1">Arbitrary user impersonation<a href="#section-1-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-1-2.3">
          <p id="section-1-2.3.1">Parameter modification or augmentation<a href="#section-1-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-1-3">The results of these actions are unauthorized access to resources.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="overview">
<section id="section-2">
      <h2 id="name-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<p id="section-2-1">Transaction Tokens (Txn-Token) are a means to mitigate damage from such attacks or spurious invocations. A valid Txn-Token indicates a valid transaction invocation. Note that while many transactions are initiated via an external event (e.g. internet facing API invocation) other transactions are initiated from within the trusted domain. Transaction tokens apply to both externally triggered and internally invoked transactions and ensure that the user's identity or a workload that made the request is preserved throughout subsequent workload invocations.
They preserve any context such as:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">
          <p id="section-2-2.1.1">Parameters of the original call<a href="#section-2-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.2">
          <p id="section-2-2.2.1">Environmental factors, such as IP address of the original caller<a href="#section-2-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.3">
          <p id="section-2-2.3.1">Any computed context that needs to be preserved in the call chain. This includes information that was not in the original request to the external endpoint.<a href="#section-2-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-2-3">Cryptographically protected Txn-Tokens ensure that downstream workloads cannot make unauthorized modifications to such information, and cannot make spurious calls without the presence of an intentionally invoked transaction.<a href="#section-2-3" class="pilcrow">¶</a></p>
<div id="what-are-transaction-tokens">
<section id="section-2.1">
        <h3 id="name-what-are-transaction-tokens">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-what-are-transaction-tokens" class="section-name selfRef">What are Transaction Tokens?</a>
        </h3>
<p id="section-2.1-1">Txn-Tokens are short-lived, signed JWTs <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> that assert the identity of a user or a workload and assert an authorization context. The authorization context provides information expected to remain constant during the execution of a call chain as it passes through multiple workloads.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="creating-txn-tokens">
<section id="section-2.2">
        <h3 id="name-creating-txn-tokens">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-creating-txn-tokens" class="section-name selfRef">Creating Txn-Tokens</a>
        </h3>
<div id="initial-creation">
<section id="section-2.2.1">
          <h4 id="name-initial-creation">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-initial-creation" class="section-name selfRef">Initial Creation</a>
          </h4>
<p id="section-2.2.1-1">Txn-Tokens are typically created when a workload is invoked using an endpoint that is externally visible, and is authorized using a separate mechanism, such as an OAuth <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span> access token. This workload then performs an OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> to obtain a Txn-Token. To do this, it invokes a special Token Service (the Txn-Token Service) and provides context that is sufficient for it to generate a Txn-Token. The context information provided to the Txn-Token Service MAY include:<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2.1-2.1">
              <p id="section-2.2.1-2.1.1">The external authorization token (e.g., the OAuth access token)<a href="#section-2.2.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-2.2.1-2.2">
              <p id="section-2.2.1-2.2.1">An internally generated JWT representing the subject of the request<a href="#section-2.2.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-2.2.1-2.3">
              <p id="section-2.2.1-2.3.1">Parameters that are required to be bound for the duration of this call<a href="#section-2.2.1-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-2.2.1-2.4">
              <p id="section-2.2.1-2.4.1">Additional context, such as the incoming IP address, User Agent information, or other context that can help the Txn-Token Service to issue the Txn-Token<a href="#section-2.2.1-2.4.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-2.2.1-3">The Txn-Token Service responds to a successful invocation by generating a Txn-Token. The calling workload then uses the Txn-Token to authorize its calls to subsequent workloads. Subsequent workloads may obtain Txn-Tokens on their own.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1-4">If the requesting service does not have an inbound token that it can use in its request to the Txn-Token Service, it generates a self-signed JWT and passes that in the request in place of the external authorization token.<a href="#section-2.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="replacement-txn-tokens">
<section id="section-2.2.2">
          <h4 id="name-replacement-txn-tokens">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-replacement-txn-tokens" class="section-name selfRef">Replacement Txn-Tokens</a>
          </h4>
<p id="section-2.2.2-1">A service within a call chain may choose to replace the Txn-Token. This can typically happen if the service wants to add to the context of the current Txn-Token<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2.2-2">To get a replacement Txn-Token, a service will request a new Txn-Token from the Txn-Token Service and provide the current Txn-Token and other parameters in the request. The Txn-Token service must be careful about the types of replacement requests it supports to avoid undermining the entire value of Txn-Tokens.<a href="#section-2.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="txn-token-lifetime">
<section id="section-2.3">
        <h3 id="name-txn-token-lifetime">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-txn-token-lifetime" class="section-name selfRef">Txn-Token Lifetime</a>
        </h3>
<p id="section-2.3-1">Txn-Tokens are expected to be short-lived (order of minutes, e.g., 5 minutes), and as a result MAY be used only for the expected duration of an external invocation. Except in the case where the request is made using a self-signed JWT, if the token or other credential presented to the Txn-Token service when requesting a Txn-Token has an expiration time, then the Txn-Token Service MUST NOT issue a Txn-Token if the expiration time has passed. The lifetime of the Txn-Token itself MAY exceed the expiration time of the presented token. The expectation is that since Txn-Tokens are short lived and are authorizing a specific transaction, extending beyond the lifetime of the presented expiration time is not a security risk. If a long-running process such as a batch or offline task is involved, it can use a separate mechanism to perform the external invocation, but the resulting Txn-Token is still short-lived.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="benefits-of-txn-tokens">
<section id="section-2.4">
        <h3 id="name-benefits-of-txn-tokens">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-benefits-of-txn-tokens" class="section-name selfRef">Benefits of Txn-Tokens</a>
        </h3>
<p id="section-2.4-1">Txn-Tokens help prevent spurious invocations by ensuring that a workload receiving an invocation can independently verify the user or workload on whose behalf an external call was made and any context relevant to the processing of the call.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="txn-token-issuance-and-usage-flows">
<section id="section-2.5">
        <h3 id="name-txn-token-issuance-and-usag">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-txn-token-issuance-and-usag" class="section-name selfRef">Txn-Token Issuance and Usage Flows</a>
        </h3>
<div id="basic-flow">
<section id="section-2.5.1">
          <h4 id="name-basic-flow">
<a href="#section-2.5.1" class="section-number selfRef">2.5.1. </a><a href="#name-basic-flow" class="section-name selfRef">Basic Flow</a>
          </h4>
<p id="section-2.5.1-1"><a href="#fig-arch-basic" class="auto internal xref">Figure 1</a> shows the basic flow of how Txn-Tokens are used in a multi-workload environment.<a href="#section-2.5.1-1" class="pilcrow">¶</a></p>
<span id="name-basic-transaction-tokens-ar"></span><div id="fig-arch-basic">
<figure id="figure-1">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.5.1-2.1">
<pre>
     1    +--------------+    2      +--------------+
---------&gt;│              │----------&gt;│              │
          │   External   │           │  Txn-Token   │
     7    │   Endpoint   │    3      │   Service    │
&lt;---------│              │&lt;----------│              │
          +--------------+           +--------------+
               │   ^
             4 v   │ 6
          +--------------+
          │              │
          │   Internal   │
          │   Workload   │
          │              │
          +--------------+
               │   ^
               v   │
                 o
             5   o    6
                 o
               │   ^
               v   │
          +--------------+
          │              │
          │   Internal   │
          │   Workload   │
          │              │
          +--------------+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-basic-transaction-tokens-ar" class="selfRef">Basic Transaction Tokens Architecture</a>
            </figcaption></figure>
</div>
<ol start="1" type="1" class="normal type-1" id="section-2.5.1-3">
<li id="section-2.5.1-3.1">
              <p id="section-2.5.1-3.1.1">External endpoint is invoked using conventional authorization mechanism such as an OAuth 2.0 Access token<a href="#section-2.5.1-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.2">
              <p id="section-2.5.1-3.2.1">External endpoint provides context and incoming authorization (e.g., access token) to the Txn-Token Service<a href="#section-2.5.1-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.3">
              <p id="section-2.5.1-3.3.1">Txn-Token Service mints a Txn-Token that provides immutable context for the transaction and returns it to the requester<a href="#section-2.5.1-3.3.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.4">
              <p id="section-2.5.1-3.4.1">The external endpoint initiates a call to an internal workloads and provides the Txn-Token as authorization<a href="#section-2.5.1-3.4.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.5">
              <p id="section-2.5.1-3.5.1">Subsequent calls to other internal workloads use the same Txn-Token to authorize calls<a href="#section-2.5.1-3.5.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.6">
              <p id="section-2.5.1-3.6.1">Responses are provided to callers based on successful authorization by the invoked workloads<a href="#section-2.5.1-3.6.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.1-3.7">
              <p id="section-2.5.1-3.7.1">External client is provided a response to the external invocation<a href="#section-2.5.1-3.7.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
<div id="replacement-txn-token-flow">
<section id="section-2.5.2">
          <h4 id="name-replacement-txn-token-flow">
<a href="#section-2.5.2" class="section-number selfRef">2.5.2. </a><a href="#name-replacement-txn-token-flow" class="section-name selfRef">Replacement Txn-Token Flow</a>
          </h4>
<p id="section-2.5.2-1">An intermediate service may decide to obtain a replacement Txn-Token from the Txn-Token service. That flow is described below in <a href="#fig-arch-replacement" class="auto internal xref">Figure 2</a><a href="#section-2.5.2-1" class="pilcrow">¶</a></p>
<span id="name-replacement-txn-token-flow-2"></span><div id="fig-arch-replacement">
<figure id="figure-2">
            <div class="alignLeft art-ascii-art art-text artwork" id="section-2.5.2-2.1">
<pre>
     1    +--------------+    2      +--------------+
---------&gt;│              │----------&gt;│              │
          │   External   │           │              │
     10   │   Endpoint   │    3      │              │
&lt;---------│              │&lt;----------│              │
          +--------------+           │              │
               │   ^                 │              │
             4 v   │ 9               │              │
          +--------------+           │              │
          │              │           │              │
          │   Internal   │           │              │
          │   Workload   │           │              │
          │              │           │              │
          +--------------+           │  Txn-Token   │
               │   ^                 │   Service    │
               v   │                 │              │
                 o                   │              │
             5   o    9              │              │
               │ o ^                 │              │
               │   │                 │              │
               v   │                 │              │
          +--------------+    6      │              │
          │              │----------&gt;│              │
          │   Internal   │           │              │
          │   Workload   │    7      │              │
          │              │&lt;----------│              │
          +--------------+           │              │
               │   ^                 │              │
               v   │                 +--------------+
                 o
             8   o    9
                 o
               │   ^
               v   │
          +--------------+
          │              │
          │   Internal   │
          │   Workload   │
          │              │
          +--------------+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-replacement-txn-token-flow-2" class="selfRef">Replacement Txn-Token Flow</a>
            </figcaption></figure>
</div>
<p id="section-2.5.2-3">In the diagram above, steps 1-5 are the same as in <a href="#basic-flow" class="auto internal xref">Section 2.5.1</a><a href="#section-2.5.2-3" class="pilcrow">¶</a></p>
<ol start="6" type="1" class="normal type-1" id="section-2.5.2-4">
<li id="section-2.5.2-4.1">
              <p id="section-2.5.2-4.1.1">An intermediate service determines that it needs to obtain a Replacement Txn-Token. It requests a Replacement Txn-Token from the Txn-Token Service. It passes the incoming Txn-Token in the request, along with any additional context it needs to send the Txn-Token Service.<a href="#section-2.5.2-4.1.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.2-4.2">
              <p id="section-2.5.2-4.2.1">The Txn-Token Service responds with a replacement Txn-Token<a href="#section-2.5.2-4.2.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.2-4.3">
              <p id="section-2.5.2-4.3.1">The service that requested the Replacement Txn-Token uses that Txn-Token for downstream call authorization<a href="#section-2.5.2-4.3.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.2-4.4">
              <p id="section-2.5.2-4.4.1">Responses are provided to callers based on successful authorization by the invoked workloads<a href="#section-2.5.2-4.4.1" class="pilcrow">¶</a></p>
</li>
            <li id="section-2.5.2-4.5">
              <p id="section-2.5.2-4.5.1">External client is provided a response to the external invocation<a href="#section-2.5.2-4.5.1" class="pilcrow">¶</a></p>
</li>
          </ol>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="notational-conventions">
<section id="section-3">
      <h2 id="name-notational-conventions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
      </h2>
<p id="section-3-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
"MAY", and "OPTIONAL" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when,
they appear in all capitals, as shown here.<a href="#section-3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-4">
      <h2 id="name-terminology">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<span class="break"></span><dl class="dlParallel" id="section-4-1">
        <dt id="section-4-1.1">Workload:</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.2">
          <p id="section-4-1.2.1">An independent computational unit that can autonomously receive and process invocations, and can generate invocations of other workloads. Examples of workloads include containerized microservices, monolithic services and infrastructure services such as managed databases.<a href="#section-4-1.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-1.3">Trust Domain:</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.4">
          <p id="section-4-1.4.1">A collection of systems, applications, or workloads that share a common security policy. In practice this may include a virtually or physically separated network, which contains two or more workloads. The workloads within a Trust Domain may be invoked only through published interfaces.<a href="#section-4-1.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-1.5">External Endpoint:</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.6">
          <p id="section-4-1.6.1">A published interface to a Trust Domain that results in the invocation of a workload within the Trust Domain.<a href="#section-4-1.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-1.7">Call Chain:</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.8">
          <p id="section-4-1.8.1">A sequence of invocations that results from the invocation of an external endpoint.<a href="#section-4-1.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-1.9">Transaction Token (Txn-Token):</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.10">
          <p id="section-4-1.10.1">A signed JWT with a short lifetime, providing immutable information about the user or workload, certain parameters of the call, and specific contextual attributes of the call. The Txn-Token is used to authorize subsequent calls in the call chain.<a href="#section-4-1.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-4-1.11">Transaction Token Service (Txn-Token Service):</dt>
        <dd style="margin-left: 1.5em" id="section-4-1.12">
          <p id="section-4-1.12.1">A special service within the Trust Domain that issues Txn-Tokens to requesting workloads. Each Trust Domain using Txn-Tokens MUST have exactly one logical Txn-Token Service.<a href="#section-4-1.12.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="txn-token-format">
<section id="section-5">
      <h2 id="name-txn-token-format">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-txn-token-format" class="section-name selfRef">Txn-Token Format</a>
      </h2>
<p id="section-5-1">A Txn-Token is a JSON Web Token <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> protected by a JSON Web Signature <span>[<a href="#RFC7515" class="cite xref">RFC7515</a>]</span>. The following describes the required values in a Txn-Token:<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="txn-token-header">
<section id="section-5.1">
        <h3 id="name-jwt-header">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-jwt-header" class="section-name selfRef">JWT Header</a>
        </h3>
<p id="section-5.1-1">In the JWT Header:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-2.1">
            <p id="section-5.1-2.1.1">The <code>typ</code> Header Parameter MUST be present and MUST have the value <code>txntoken+jwt</code>.<a href="#section-5.1-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-5.1-2.2">
            <p id="section-5.1-2.2.1">Key rotation of the signing key SHOULD be supported through the use of a <code>kid</code> Header Parameter.<a href="#section-5.1-2.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-5.1-3"><a href="#figtxtokenheader" class="auto internal xref">Figure 3</a> is a non-normative example of the JWT Header of a Txn-Token<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<span id="name-example-txn-token-header"></span><div id="figtxtokenheader">
<figure id="figure-3">
          <div class="lang-json sourcecode" id="section-5.1-4.1">
<pre>
{
    "typ": "txntoken+jwt",
    "alg": "RS256",
    "kid": "identifier-to-key"
}
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-example-txn-token-header" class="selfRef">Example: Txn-Token Header</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="txn-token-claims">
<section id="section-5.2">
        <h3 id="name-jwt-body-claims">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-jwt-body-claims" class="section-name selfRef">JWT Body Claims</a>
        </h3>
<p id="section-5.2-1">The transaction token body follows the JWT format and includes existing
JWT claims as well as defines new claims. These claims are described below:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2-2">
          <dt id="section-5.2-2.1">
<code>iss</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.2">
            <p id="section-5.2-2.2.1">OPTIONAL The <code>iss</code> claim as defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> is not required as Txn-Tokens are bound to a single Trust Domain as defined by the <code>aud</code> claim and often the signing keys are known. The <code>iss</code> claim MUST be used in cases where the signing keys are not predetermined or it is desired that the Txn-Token Service signs with unique keys.<a href="#section-5.2-2.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.3">
<code>iat</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.4">
            <p id="section-5.2-2.4.1">REQUIRED The issued at time of the Txn-Token as defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span><a href="#section-5.2-2.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.5">
<code>aud</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.6">
            <p id="section-5.2-2.6.1">REQUIRED This claim, defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>, identifies the Trust Domain in which the Txn-Token is valid.  This identifier MUST uniquely identify the Trust Domain to prevent the Txn-Token from being accepted outside it's current Trust Domain.<a href="#section-5.2-2.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.7">
<code>exp</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.8">
            <p id="section-5.2-2.8.1">REQUIRED Expiry time of the Txn-Token as defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span><a href="#section-5.2-2.8.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.9">
<code>txn</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.10">
            <p id="section-5.2-2.10.1">REQUIRED A unique transaction identifier as defined in Section 2.2 of <span>[<a href="#RFC8417" class="cite xref">RFC8417</a>]</span>.<a href="#section-5.2-2.10.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.11">
<code>sub</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.12">
            <p id="section-5.2-2.12.1">REQUIRED A unique identifier for the subject within the context of the <code>aud</code> Trust Domain. Unlike OpenID Connect, the <code>sub</code> claim is NOT associated with the <code>iss</code> claim.<a href="#section-5.2-2.12.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.13">
<code>purp</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.14">
            <p id="section-5.2-2.14.1">REQUIRED A String defining the purpose or intent of this transaction.<a href="#section-5.2-2.14.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.15">
<code>tctx</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.16">
            <p id="section-5.2-2.16.1">OPTIONAL A JSON object that contains values that remain immutable throughout the call chain.<a href="#section-5.2-2.16.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-2.17">
<code>rctx</code>:</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-2.18">
            <p id="section-5.2-2.18.1">OPTIONAL A JSON object that describes the environmental context of the requested transaction.<a href="#section-5.2-2.18.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<div id="purp-claim">
<section id="section-5.2.1">
          <h4 id="name-purpose-claim">
<a href="#section-5.2.1" class="section-number selfRef">5.2.1. </a><a href="#name-purpose-claim" class="section-name selfRef">Purpose claim</a>
          </h4>
<p id="section-5.2.1-1">The <code>purp</code> claim captures the exact purpose of this particular transaction. This is often much narrower than a scope value issued to an external client. This is due to the fact that in most cases, the authorization model within the Trust Domain is quite different than the authorization model used with clients external to the Trust Domain. To that end, it is intentional to separate the concept of scope (often fairly coarse-grained) used with external clients from the purpose of the transaction used within the Trust Domain. How a given deployment represents the authorization model within the Trust Domain is out of scope for this specification.<a href="#section-5.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="requester-context">
<section id="section-5.2.2">
          <h4 id="name-requester-context">
<a href="#section-5.2.2" class="section-number selfRef">5.2.2. </a><a href="#name-requester-context" class="section-name selfRef">Requester Context</a>
          </h4>
<p id="section-5.2.2-1">The Txn-Token SHOULD contain an <code>rctx</code> claim. This MAY include the IP address information of the originating user, as well as information about the computational entity that requested the Txn-Token and contextual attributes of the originating request itself.<a href="#section-5.2.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2.2-2">The JSON value of the <code>rctx</code> claim MAY include any values the Txn-Token Service determines are interesting to downstream services that rely on the Txn-Token. The following claims are defined so that if they are included, they have the following meaning:<a href="#section-5.2.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2.2-3.1">
              <p id="section-5.2.2-3.1.1"><code>req_ip</code> The IP address of the requester. This MAY be the end-user or a robotic process that requested the Transaction<a href="#section-5.2.2-3.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.2.2-3.2">
              <p id="section-5.2.2-3.2.1"><code>authn</code> The authentication method used to identify the requester. Its value is a StringOrURI that uniquely identifies the method used.<a href="#section-5.2.2-3.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-5.2.2-3.3">
              <p id="section-5.2.2-3.3.1"><code>req_wl</code> The requesting workload. A StringOrURI that uniquely identifies the computational entity that requested the Txn-Token. This entity MUST be within the Trust Domain of the Txn-Token. If a replacement Txn-Token has been requested, then this claim will be an array of StringOrURIs representing the different workloads that have requested Txn-Tokens as part of the transaction processing.<a href="#section-5.2.2-3.3.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="transaction-context">
<section id="section-5.2.3">
          <h4 id="name-transaction-context">
<a href="#section-5.2.3" class="section-number selfRef">5.2.3. </a><a href="#name-transaction-context" class="section-name selfRef">Transaction Context</a>
          </h4>
<p id="section-5.2.3-1">The Txn-Token SHOULD contain an <code>tctx</code> claim. The value of this claim is a JSON object that contains name/value pairs (wherein the value could itself be an object), which together assert the details that remain immutable through the call-chain where this Txn-Token is used.<a href="#section-5.2.3-1" class="pilcrow">¶</a></p>
<p id="section-5.2.3-2">Txn-Tokens are primarily used to assure identity and context for a transaction, and the content of this field is a critical part of that context.<a href="#section-5.2.3-2" class="pilcrow">¶</a></p>
<p id="section-5.2.3-3">Whereas the <code>rctx</code> field contains environmental values related to the request, the <code>tctx</code> field contains the actual authorizaton details that are determined by the TTS. These values are used by services using the Txn-Token to reliably obtain specific parameters needed to perform their work. The content of the <code>tctx</code> field is determined by the Txn-Token Service and they may be computed internally or from parameters it receives from the service that requests the Txn-Token.<a href="#section-5.2.3-3" class="pilcrow">¶</a></p>
<p id="section-5.2.3-4">The following is a non-normative example of an <code>tctx</code> claim:<a href="#section-5.2.3-4" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-5.2.3-5">
<pre>
"tctx": {
  "action": "BUY", // parameter of external call
  "ticker": "MSFT", // parameter of external call
  "quantity": "100", // parameter of external call
  "customer_type": { // computed value not present in external call
    "geo": "US",
    "level": "VIP"
  }
}
</pre><a href="#section-5.2.3-5" class="pilcrow">¶</a>
</div>
<div id="requesting-workload-identifier">
<section id="section-5.2.3.1">
            <h5 id="name-requesting-workload-identif">
<a href="#section-5.2.3.1" class="section-number selfRef">5.2.3.1. </a><a href="#name-requesting-workload-identif" class="section-name selfRef">Requesting Workload Identifier</a>
            </h5>
<p id="section-5.2.3.1-1">It is useful to be able to track the set of workloads that have requested a Txn-Token. The <code>req_wl</code> claim allows for tracking this information even through requests for a replacement Txn-Token. By default, the <code>req_wl</code> is a StringOrURI representing the original workload entity that requested the Txn-Token. However, if a workload within the path of servicing the transaction requests a replacement Txn-Token, then the Transaction Token Service will append the new requesting workload as a subsequent array element in the <code>req_wl</code> claim. This provides a "pathing" mechanism to track which services have requested replacement Txn-Tokens. If there is only a single value the <code>req_wl</code> will be a StringOrURI. If there is more than a single value, then <code>req_wl</code> will be represented by an array of StringOrURIs.<a href="#section-5.2.3.1-1" class="pilcrow">¶</a></p>
<div class="lang-json sourcecode" id="section-5.2.3.1-2">
<pre>
{
    "rctx": {
      "req_ip": "69.151.72.123", // env context of external call
      "authn": "urn:ietf:rfc:6749", // env context of the external call
      "req_wl": [ "apigateway.trust-domain.example", "workload3.trust-domain.example" ]
    }
}
</pre><a href="#section-5.2.3.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="example">
<section id="section-5.2.4">
          <h4 id="name-example">
<a href="#section-5.2.4" class="section-number selfRef">5.2.4. </a><a href="#name-example" class="section-name selfRef">Example</a>
          </h4>
<p id="section-5.2.4-1">The figure below <a href="#figleaftxtokenbody" class="auto internal xref">Figure 4</a> shows a non-normative example of the JWT body of a Txn-Token:<a href="#section-5.2.4-1" class="pilcrow">¶</a></p>
<span id="name-example-txn-token-body"></span><div id="figleaftxtokenbody">
<figure id="figure-4">
            <div class="lang-json sourcecode" id="section-5.2.4-2.1">
<pre>
{
  "iat": 1686536226,
  "aud": "trust-domain.example",
  "exp": 1686536586,
  "txn": "97053963-771d-49cc-a4e3-20aad399c312",
  "sub": "d084sdrt234fsaw34tr23t",
  "rctx": {
    "req_ip": "69.151.72.123", // env context of external call
    "authn": "urn:ietf:rfc:6749", // env context of the external call
    "req_wl": "apigateway.trust-domain.example" // the internal entity that requested the Txn-Token
  },
  "purp" : "trade.stocks",
  "tctx": {
    "action": "BUY", // parameter of external call
    "ticker": "MSFT", // parameter of external call
    "quantity": "100", // parameter of external call
    "customer_type": { // computed value not present in external call
      "geo": "US",
      "level": "VIP"
    }
  }
}
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-example-txn-token-body" class="selfRef">Example: Txn-Token Body</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="txn-token-service">
<section id="section-6">
      <h2 id="name-txn-token-service">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-txn-token-service" class="section-name selfRef">Txn-Token Service</a>
      </h2>
<p id="section-6-1">A Txn-Token Service implements a profile of the OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> endpoint that can respond to Txn-Token issuance requests. This profile of the OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> specification MUST be used to obtain Txn-Tokens. The unique properties of the Txn-Token requests and responses are described below. The Txn-Token Service MAY optionally support other OAuth 2.0 endpoints and features, but that is not a requirement for it to be a Txn-Token Service.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Each Trust Domain that uses Txn-Tokens MUST have exactly one logical Txn-Token Service.<a href="#section-6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="requesting-txn-tokens">
<section id="section-7">
      <h2 id="name-requesting-txn-tokens">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-requesting-txn-tokens" class="section-name selfRef">Requesting Txn-Tokens</a>
      </h2>
<p id="section-7-1">A workload requests a Txn-Token from a Transaction Token Service using a profile of the OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span>. Txn-Tokens may be requested for both externally originating or internally originating requests. The profile describes how required and optional context can be provided to the Transaction Token Service in order for the Txn-Token to be issued. The request to obtain a Txn-Token using this method is called a Txn-Token Request, and a successful response is called a Txn-Token Response. The Txn-Token profile of the OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> is described below.<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="txn-token-request">
<section id="section-7.1">
        <h3 id="name-txn-token-request">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-txn-token-request" class="section-name selfRef">Txn-Token Request</a>
        </h3>
<p id="section-7.1-1">A workload requesting a Txn-Token must provide the Transaction Token Service with proof of its identity (client authentication), the purpose of the Txn-Token and optionally any additional context relating to the transaction being performed. Most of these elements are provided by the OAuth 2.0 Token Exchange specification and the rest are defined as new parameters. Additionally, this profile defines a new token type URN <code>urn:ietf:params:oauth:token-type:txn_token</code> which is used by the requesting workload to identify that it is requesting the Txn-Token Response to contain a Txn-Token.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">To request a Txn-Token the workload invokes the OAuth 2.0 <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span> token endpoint with the following parameters:<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-3.1">
            <p id="section-7.1-3.1.1"><code>grant_type</code> REQUIRED. The value MUST be set to <code>urn:ietf:params:oauth:grant-type:token-exchange</code>.<a href="#section-7.1-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-3.2">
            <p id="section-7.1-3.2.1"><code>audience</code> REQUIRED. The value MUST be set to the Trust Domain name.<a href="#section-7.1-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-3.3">
            <p id="section-7.1-3.3.1"><code>scope</code> REQUIRED. A space-delimited list of case-sensitive strings where the value(s) MUST represent the specific purpose or intent of the transaction.<a href="#section-7.1-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-3.4">
            <p id="section-7.1-3.4.1"><code>requested_token_type</code> REQUIRED. The value MUST be <code>urn:ietf:params:oauth:token-type:txn_token</code><a href="#section-7.1-3.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-3.5">
            <p id="section-7.1-3.5.1"><code>subject_token</code> REQUIRED. The value MUST represent the subject of the transaction. This MAY be:<a href="#section-7.1-3.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-3.5.2.1">
                <p id="section-7.1-3.5.2.1.1">An inbound token received by an API Gateway<a href="#section-7.1-3.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.1-3.5.2.2">
                <p id="section-7.1-3.5.2.2.1">A self-signed JWT constructed by a workload initiating a transaction<a href="#section-7.1-3.5.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.1-3.5.2.3">
                <p id="section-7.1-3.5.2.3.1">An unsigned JSON object constructed by a workload initiating a transaction<a href="#section-7.1-3.5.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-7.1-3.5.2.4">
                <p id="section-7.1-3.5.2.4.1">Any other format that is understood by the Txn-Token Service<a href="#section-7.1-3.5.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
<p id="section-7.1-3.5.3">
The type of the <code>subject_token</code> field is identified by <code>subject_token_type</code>.<a href="#section-7.1-3.5.3" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-3.6">
            <p id="section-7.1-3.6.1"><code>subject_token_type</code> REQUIRED. The value MUST indicate the type of the token or value present in the <code>subject_token</code> parameter<a href="#section-7.1-3.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.1-4">The following additional parameters MAY be present in a Txn-Token Request:<a href="#section-7.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-5.1">
            <p id="section-7.1-5.1.1"><code>request_context</code> OPTIONAL. This parameter contains a base64url encoded JSON object which represents the context of this transaction. The parameter SHOULD be present and how the Transaction Token Service uses this parameter is out of scope for this specification.<a href="#section-7.1-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.2">
            <p id="section-7.1-5.2.1"><code>request_details</code> OPTIONAL. This parameter contains a base64url encoded JSON object which represents additional details of the transaction that MUST remain immutable throughout the processing of the transaction by multiple workloads. The Transaction Token Service uses this information to construct the <code>tctx</code> claim.<a href="#section-7.1-5.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.1-6">The requesting workload MUST authenticate its identity to the Transaction Token Service. The exact client authentication mechanism used is outside the scope of this specification.<a href="#section-7.1-6" class="pilcrow">¶</a></p>
<p id="section-7.1-7">The figure below <a href="#figtxtokenrequest" class="auto internal xref">Figure 5</a> shows a non-normative example of a Txn-Token Request.<a href="#section-7.1-7" class="pilcrow">¶</a></p>
<span id="name-example-txn-token-request"></span><div id="figtxtokenrequest">
<figure id="figure-5">
          <div class="lang-http sourcecode" id="section-7.1-8.1">
<pre>
POST /txn-token-service/token_endpoint HTTP 1.1
Host: txn-token-service.trust-domain.example
Content-Type: application/x-www-form-urlencoded

grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Atoken-exchange
&amp;requested_token_type=urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Atxn-token
&amp;audience=http%3A%2F%2Ftrust-domain.example
&amp;scope=finance.watchlist.add
&amp;subject_token=eyJhbGciOiJFUzI1NiIsImtpZC...kdXjwhw
&amp;subject_token_type=urn%3Aietf%3Aparams%3Aoauth%3Atoken-type%3Aaccess_token
&amp;request_context=eyAiaXBfYWRkcmVzcyI6ICIxMjcuMC4wLjEiLCAiY2xpZW50IjogIm1vYmlsZS1hcHAiLCAiY2xpZW50X3ZlcnNpb24iOiAidjExIiB9
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-example-txn-token-request" class="selfRef">Example: Txn-Token Request</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="subject-token-types">
<section id="section-7.2">
        <h3 id="name-subject-token-types">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-subject-token-types" class="section-name selfRef">Subject Token Types</a>
        </h3>
<p id="section-7.2-1">The <code>subject_token_type</code> parameter value MUST be a URI <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>. It MAY be:<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2-2.1">
            <p id="section-7.2-2.1.1">Any one of the subject token types described in Section 3 of OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> except the Refresh Token type (i.e., <code>urn:ietf:params:oauth:token-type:refresh_token</code>).<a href="#section-7.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.2">
            <p id="section-7.2-2.2.1">A URN type name when the subject token is a self-signed JWT, as described below.<a href="#section-7.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.3">
            <p id="section-7.2-2.3.1">A URN type name when the subject token is an unsigned JSON object, as described below.<a href="#section-7.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.2-2.4">
            <p id="section-7.2-2.4.1">A custom URN agreed to between requesters and the Txn-Token Service. The Txn-Token Service MAY support other token formats, which MAY be specified in the <code>subject_token_type</code> parameter.<a href="#section-7.2-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<div id="self-signed-subject-token-type">
<section id="section-7.2.1">
          <h4 id="name-self-signed-subject-token-t">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-self-signed-subject-token-t" class="section-name selfRef">Self-Signed Subject Token Type</a>
          </h4>
<p id="section-7.2.1-1">A requester MAY use a self-signed JWT as a <code>subject_token</code> value. In that case, the requester MUST set the <code>subject_token_type</code> value to: <code>urn:ietf:params:oauth:token-type:self_signed</code>. This self-signed JWT MUST contain the following claims:<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2.1-2.1">
              <p id="section-7.2.1-2.1.1"><code>iss</code>: The unique identifier of the requesting workload. The Txn-Token Service SHALL use this value in determining the <code>req_wl</code> value in the Txn-Token issued in response to this request.<a href="#section-7.2.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.2.1-2.2">
              <p id="section-7.2.1-2.2.1"><code>sub</code>: The subject for whom the Txn-Token is being requested. The Txn-Token Service SHALL use this value in determining the <code>sub</code> value in the Txn-Token issued in the response to this request.<a href="#section-7.2.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.2.1-2.3">
              <p id="section-7.2.1-2.3.1"><code>aud</code>: The unique identifier of the Txn-Token Service. The Txn-Token Service SHALL verify that this value matches its own unique identifier.<a href="#section-7.2.1-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.2.1-2.4">
              <p id="section-7.2.1-2.4.1"><code>iat</code>: The time at which the self-signed JWT was created. Note that the Txn-Token Service may reject self-signed tokens with an <code>iat</code> value that is unreasonably far in the past or future.<a href="#section-7.2.1-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.2.1-2.5">
              <p id="section-7.2.1-2.5.1"><code>exp</code>: The expiration time for the JWT. This should be a very short duration (order of seconds) in order to prevent any abuse of the JWT.<a href="#section-7.2.1-2.5.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-7.2.1-3">The self-signed JWT MAY contain other claims.<a href="#section-7.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="unsigned-json-subject-token-type">
<section id="section-7.2.2">
          <h4 id="name-unsigned-json-object-subjec">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-unsigned-json-object-subjec" class="section-name selfRef">Unsigned JSON Object Subject Token Type</a>
          </h4>
<p id="section-7.2.2-1">A requester MAY use an unsigned JSON object as a <code>subject_token</code> value. In that case, the requester MUST set the <code>subject_token_type</code> value to: <code>urn:ietf:params:oauth:token-type:unsigned_json</code>. The value of the <code>subject_token</code> field MUST be the BASE64URL encoded value of the JSON object as described in <span><a href="https://rfc-editor.org/rfc/rfc6848#section-5" class="relref">Section 5</a> of [<a href="#RFC6848" class="cite xref">RFC6848</a>]</span>.  The JSON object in the subject token MUST contain the following fields:<a href="#section-7.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.2.2-2.1">
              <p id="section-7.2.2-2.1.1"><code>sub</code>: The subject for whom the Txn-Token is being requested. The Txn-Token Service SHALL use this value in determining the <code>sub</code> value in the Txn-Token issued in the response to this request.<a href="#section-7.2.2-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.2.2-2.2">
              <p id="section-7.2.2-2.2.1"><code>exp</code>: The expiration time of the unsigned JSON object, which the TTS MAY use as input to determine the lifetime of the Txn-token.<a href="#section-7.2.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          </ul>
<p id="section-7.2.2-3">The unsigned JSON object MAY contain other fields, and the Txn-Token Service MAY consider them when generating the Txn-Token.<a href="#section-7.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="txn-token-request-processing">
<section id="section-7.3">
        <h3 id="name-txn-token-request-processin">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-txn-token-request-processin" class="section-name selfRef">Txn-Token Request Processing</a>
        </h3>
<p id="section-7.3-1">When the Transaction Token Service receives a Txn-Token Request it MUST validate the requesting workload client authentication and determine if that workload is authorized to obtain the Txn-Tokens with the requested values. The authorization policy for determining such issuance is out of scope for this specification.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">Next, the Transaction Token Service MUST validate the <code>subject_token</code> and determine the value to specify as the <code>sub</code> of the issued Txn-Token. The Txn-Token Service MUST ensure the <code>sub</code> value is unique within the Trust Domain defined by the <code>aud</code> claim.<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<p id="section-7.3-3">The Transaction Token Service MUST set the <code>iat</code> claim to the time of issuance of the Txn-Token.<a href="#section-7.3-3" class="pilcrow">¶</a></p>
<p id="section-7.3-4">The Transaction Token Service MUST set the <code>aud</code> claim to an identifier representing the Trust Domain of the Transaction Token Service. If the Transaction Token Service supports multiple Trust Domains, then it MUST determine the correct <code>aud</code> value for this request.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
<p id="section-7.3-5">The Transaction Token Service MUST set the <code>exp</code> claim to the expiry time of the Txn-Token. The Txn-Token Service MAY consider any <code>exp</code> value present in the <code>subject_token</code> parameter of the Txn-Token Request in determining the <code>exp</code> value of the resulting Txn-Token.<a href="#section-7.3-5" class="pilcrow">¶</a></p>
<p id="section-7.3-6">The Transaction Token Service MUST set the <code>txn</code> claim to a unique ID specific to this transaction.<a href="#section-7.3-6" class="pilcrow">¶</a></p>
<p id="section-7.3-7">The Transaction Token Service MAY set the <code>iss</code> claim of the Txn-Token to a value defining the entity that signed the Txn-Token. This claim MUST be omitted if not set.<a href="#section-7.3-7" class="pilcrow">¶</a></p>
<p id="section-7.3-8">The Transaction Token Service MUST evaluate the value specified in the <code>scope</code> parameter of the request to determine the <code>purp</code> claim of the issued Txn-Token.<a href="#section-7.3-8" class="pilcrow">¶</a></p>
<p id="section-7.3-9">If a <code>request_context</code> parameter is present in the Txn-Token Request, the data SHOULD be added to the <code>rctx</code> object of the Txn-Token. In addition, the Transaction Token Service SHOULD add the authenticated requesting workload identifier in the <code>rctx</code> object as the <code>req_wl</code> claim.<a href="#section-7.3-9" class="pilcrow">¶</a></p>
<p id="section-7.3-10">If a <code>request_details</code> parameter is present in the Txn-Token Request, then the Transaction Token Service SHOULD propagate the data from the <code>request_details</code> object into the claims in the <code>tctx</code> object as authorized by the Transaction Token Service authorization policy for the requesting client.<a href="#section-7.3-10" class="pilcrow">¶</a></p>
<p id="section-7.3-11">The Transaction Token Service MAY provide additional processing and verification that is outside the scope of this specification.<a href="#section-7.3-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="txn-token-response">
<section id="section-7.4">
        <h3 id="name-txn-token-response">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-txn-token-response" class="section-name selfRef">Txn-Token Response</a>
        </h3>
<p id="section-7.4-1">A successful response to a Txn-Token Request by a Transaction Token Service is called a Txn-Token Response. If the Transaction Token Service responds with an error, the error response is as described in Section 5.2 of <span>[<a href="#RFC6749" class="cite xref">RFC6749</a>]</span>. The following values defined in <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> MUST be included in the Txn-Token Response:<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.4-2.1">
            <p id="section-7.4-2.1.1">The <code>token_type</code> value MUST be set to <code>N_A</code> per guidance in OAuth 2.0 Token Exchange <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span><a href="#section-7.4-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.4-2.2">
            <p id="section-7.4-2.2.1">The <code>access_token</code> value MUST be the Txn-Token JWT<a href="#section-7.4-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.4-2.3">
            <p id="section-7.4-2.3.1">The <code>issued_token_type</code> value MUST bet set to <code>urn:ietf:params:oauth:token-type:txn_token</code><a href="#section-7.4-2.3.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.4-3">The Txn-Token Response MUST NOT include the values <code>expires_in</code>, <code>refresh_token</code> and <code>scope</code><a href="#section-7.4-3" class="pilcrow">¶</a></p>
<p id="section-7.4-4"><a href="#figtxtokenresponse" class="auto internal xref">Figure 6</a> shows a non-normative example of a Txn-Token Response.<a href="#section-7.4-4" class="pilcrow">¶</a></p>
<span id="name-example-txn-token-response"></span><div id="figtxtokenresponse">
<figure id="figure-6">
          <div class="lang-http sourcecode" id="section-7.4-5.1">
<pre>
HTTP/1.1 200 OK
Content-Type: application/json
Cache-Control: no-store

{
  "token_type": "N_A",
  "issued_token_type": "urn:ietf:params:oauth:token-type:txn_token",
  "access_token": "eyJCI6IjllciJ9...Qedw6rx"
}
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-example-txn-token-response" class="selfRef">Example: Txn-Token Response</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="creating-replacement-txn-tokens">
<section id="section-7.5">
        <h3 id="name-creating-replacement-txn-to">
<a href="#section-7.5" class="section-number selfRef">7.5. </a><a href="#name-creating-replacement-txn-to" class="section-name selfRef">Creating Replacement Txn-Tokens</a>
        </h3>
<p id="section-7.5-1">A workload within a call chain may request the Transaction Token Service to replace a Txn-Token.<a href="#section-7.5-1" class="pilcrow">¶</a></p>
<p id="section-7.5-2">Workloads MAY request replacement Txn-Tokens in order to change (add to, remove or modify) the asserted values within a Txn-Token.<a href="#section-7.5-2" class="pilcrow">¶</a></p>
<p id="section-7.5-3">The values of the <code>sub</code> and <code>aud</code> claims MUST remain unchanged in a replacement Txn-Token. If the claim <code>rctx</code> is present in the original Txn-Token, then it MUST be present and unchanged in the replacement Txn-Token except for the <code>req_wl</code> claim which MUST be updated to include the requesting workload identifier.<a href="#section-7.5-3" class="pilcrow">¶</a></p>
<div id="txn-token-service-responsibilities">
<section id="section-7.5.1">
          <h4 id="name-txn-token-service-responsib">
<a href="#section-7.5.1" class="section-number selfRef">7.5.1. </a><a href="#name-txn-token-service-responsib" class="section-name selfRef">Txn-Token Service Responsibilities</a>
          </h4>
<p id="section-7.5.1-1">When issuing replacement Txn-Tokens, a Txn-Token Service:<a href="#section-7.5.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.5.1-2.1">
              <p id="section-7.5.1-2.1.1">MAY enable modifications to asserted values that reduce the scope of permitted actions<a href="#section-7.5.1-2.1.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.2">
              <p id="section-7.5.1-2.2.1">MAY enable additional asserted values<a href="#section-7.5.1-2.2.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.3">
              <p id="section-7.5.1-2.3.1">MUST NOT enable modification to asserted values that expand the scope of permitted actions<a href="#section-7.5.1-2.3.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.4">
              <p id="section-7.5.1-2.4.1">MUST NOT modify <code>sub</code> and <code>aud</code> values of the Txn-Token in the request<a href="#section-7.5.1-2.4.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.5">
              <p id="section-7.5.1-2.5.1">MUST NOT remove any of the existing requesting workload identifiers from the <code>req_wl</code> field in the <code>rctx</code> claim of the Txn-Token<a href="#section-7.5.1-2.5.1" class="pilcrow">¶</a></p>
</li>
            <li class="normal" id="section-7.5.1-2.6">
              <p id="section-7.5.1-2.6.1">MUST NOT issue replacement Txn-token with lifetime exceeding the lifetime of the originally presented token<a href="#section-7.5.1-2.6.1" class="pilcrow">¶</a></p>
</li>
          </ul>
</section>
</div>
<div id="replacement-txn-token-request">
<section id="section-7.5.2">
          <h4 id="name-replacement-txn-token-reque">
<a href="#section-7.5.2" class="section-number selfRef">7.5.2. </a><a href="#name-replacement-txn-token-reque" class="section-name selfRef">Replacement Txn-Token Request</a>
          </h4>
<p id="section-7.5.2-1">To request a replacement Txn-Token, the requester makes a Txn-Token Request as described in <a href="#txn-token-request" class="auto internal xref">Section 7.1</a> but includes the Txn-Token to be replaced as the value of the <code>subject_token</code> parameter and sets the <code>subject_token_type</code> parameter to the value <code>urn:ietf:params:oauth:token-type:txn_token</code>. The <code>scope</code> value in the replacement request, if different from that in the original Txn-Token, MUST NOT increase the granted authorization beyond that of the original Txn-Token.<a href="#section-7.5.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="replacement-txn-token-response">
<section id="section-7.5.3">
          <h4 id="name-replacement-txn-token-respo">
<a href="#section-7.5.3" class="section-number selfRef">7.5.3. </a><a href="#name-replacement-txn-token-respo" class="section-name selfRef">Replacement Txn-Token Response</a>
          </h4>
<p id="section-7.5.3-1">A successful response by the Txn-Token Service to a Replacement Txn-Token Request is a Txn-Token Response as described in <a href="#txn-token-response" class="auto internal xref">Section 7.4</a><a href="#section-7.5.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="mutual-authentication-of-the-txn-token-request">
<section id="section-7.6">
        <h3 id="name-mutual-authentication-of-th">
<a href="#section-7.6" class="section-number selfRef">7.6. </a><a href="#name-mutual-authentication-of-th" class="section-name selfRef">Mutual Authentication of the Txn-Token Request</a>
        </h3>
<p id="section-7.6-1">A workload and Transaction Token Service MUST perform mutual authentication.<a href="#section-7.6-1" class="pilcrow">¶</a></p>
<p id="section-7.6-2">A Txn-Token Service MUST ensure that it authenticates any workloads requesting Txn-Tokens. In order to do so:<a href="#section-7.6-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.6-3.1">
            <p id="section-7.6-3.1.1">It MUST maintain a limited, pre-configured set of authorized workloads that MAY request Txn-Tokens.<a href="#section-7.6-3.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-3.2">
            <p id="section-7.6-3.2.1">It MUST authenticate the requesting workload and confirm that it is included in the list of workloads authorized to request a transaction token.<a href="#section-7.6-3.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-3.3">
            <p id="section-7.6-3.3.1">It SHOULD accept workload credentials such as JWTs or X.509 certificates which MAY be provisioned using mechanisms such as <span>[<a href="#SPIFFE" class="cite xref">SPIFFE</a>]</span> or other provisioning protocols.<a href="#section-7.6-3.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-3.4">
            <p id="section-7.6-3.4.1">It SHOULD use X.509 credentials in conjunction with MTLS <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>, or a JWT protected by TLS at the transport layer, to securely authenticate the requesting workload.<a href="#section-7.6-3.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-3.5">
            <p id="section-7.6-3.5.1">It SHOULD NOT rely on insecure mechanisms, such as long-lived shared secrets to authenticate the requesting workloads.<a href="#section-7.6-3.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.6-4">The requesting workload MUST ensure that it authenticates the Transaction Token Service. In order to do so:<a href="#section-7.6-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.6-5.1">
            <p id="section-7.6-5.1.1">It MUST have a pre-configured location for the Transaction Token Service.<a href="#section-7.6-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-5.2">
            <p id="section-7.6-5.2.1">It SHOULD accept Transaction Token Service credentials such as JWTs or X.509 certificates which MAY be provisioned using mechanisms such as <span>[<a href="#SPIFFE" class="cite xref">SPIFFE</a>]</span> or other provisioning protocols.<a href="#section-7.6-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-5.3">
            <p id="section-7.6-5.3.1">It SHOULD use X.509 credentials in conjunction with MTLS <span>[<a href="#RFC8446" class="cite xref">RFC8446</a>]</span>, or a JWT protected by TLS at the transport layer, to securely authenticate the Transaction Token Service.<a href="#section-7.6-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.6-5.4">
            <p id="section-7.6-5.4.1">It SHOULD NOT rely on insecure mechanisms, such as long-lived shared secrets to authenticate the Transaction Token Service.<a href="#section-7.6-5.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="using-txn-tokens">
<section id="section-8">
      <h2 id="name-using-txn-tokens">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-using-txn-tokens" class="section-name selfRef">Using Txn-Tokens</a>
      </h2>
<p id="section-8-1">Txn-Tokens need to be communicated between workloads that depend upon them to authorize the request. Such workloads will often present HTTP <span>[<a href="#RFC9110" class="cite xref">RFC9110</a>]</span> interfaces for being invoked by other workloads. This section specifies the HTTP header the invoking workload MUST use to communicate the Txn-Token to the invoked workload, when the invoked workload presents an HTTP interface. Note that the standard HTTP <code>Authorization</code> header MUST NOT be used because that may be used by the workloads to communicate channel authorization.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="txn-token-http-header">
<section id="section-8.1">
        <h3 id="name-txn-token-http-header">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-txn-token-http-header" class="section-name selfRef">Txn-Token HTTP Header</a>
        </h3>
<p id="section-8.1-1">A workload that invokes another workload using HTTP and needs to present a Txn-Token to the invoked workload MUST use the HTTP Header <code>Txn-Token</code> to communicate the Txn-Token. The value of this header MUST be the Txn-Token.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="txn-token-lifetime-1">
<section id="section-9.1">
        <h3 id="name-txn-token-lifetime-2">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-txn-token-lifetime-2" class="section-name selfRef">Txn-Token Lifetime</a>
        </h3>
<p id="section-9.1-1">A Txn-Token is not resistant to replay attacks. A long-lived Txn-Token therefore represents a risk if it is stored in a file, discovered by an attacker, and then replayed. For this reason, a Txn-Token lifetime must be kept short, not exceeding the lifetime of a call-chain. Even for long-running "batch" jobs, a longer-lived access token should be used to initiate the request to the batch endpoint. It then obtains short-lived Txn-Tokens that may be used to authorize the call to downstream services in the call-chain.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">Because Txn-Tokens are short-lived, the Txn-Token response from the Txn-Token service does not contain the <code>refresh_token</code> field. A Txn-Token cannot be issued by presenting a <code>refresh_token</code>.<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">The <code>expires_in</code> and <code>scope</code> fields of the OAuth 2.0 Token Exchange specification <span>[<a href="#RFC8693" class="cite xref">RFC8693</a>]</span> are also not used in Txn-Token responses. The <code>expires_in</code> is not required since the issued token has an <code>exp</code> field, which indicates the token lifetime. The <code>scope</code> field is omitted from the response in favor of the <code>purp</code> claim in the Txn-Token.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="access-tokens">
<section id="section-9.2">
        <h3 id="name-access-tokens">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-access-tokens" class="section-name selfRef">Access Tokens</a>
        </h3>
<p id="section-9.2-1">When creating Txn-Tokens, the Txn-Token MUST NOT contain the Access Token presented to the external endpoint. If an Access Token is included in a Txn-Token, an attacker may extract the Access Token from the Txn-Token, and replay it to any Resource Server that can accept that Access Token. Txn-Token expiry does not protect against this attack since the Access Token may remain valid even after the Txn-Token has expired.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-sub-token-types">
<section id="section-9.3">
        <h3 id="name-subject-token-types-2">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-subject-token-types-2" class="section-name selfRef">Subject Token Types</a>
        </h3>
<p id="section-9.3-1">A service requesting a Txn-Token SHOULD provide an incoming token if it has one that it used itself to authorize a caller, and if it directly correlates with the downstream call chain it needs the Txn-Token for. In the absence of an appropriate incoming token, the requesting service MAY use a self-signed JWT, an unsigned JSON object or any other format to represent the details of the requester to the Txn-Token service.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="client-authentication">
<section id="section-9.4">
        <h3 id="name-client-authentication">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-client-authentication" class="section-name selfRef">Client Authentication</a>
        </h3>
<p id="section-9.4-1">If using the <code>actor_token</code> and <code>actor_token_type</code> parameters of the OAuth 2.0 Token Exchange specification, both parameters MUST be present in the request. The <code>actor_token</code> MUST authenticate the identity of the requesting workload.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="replacement-tokens">
<section id="section-9.5">
        <h3 id="name-replacement-tokens">
<a href="#section-9.5" class="section-number selfRef">9.5. </a><a href="#name-replacement-tokens" class="section-name selfRef">Replacement Tokens</a>
        </h3>
<p id="section-9.5-1">Validation of a replacement Txn-Token, as well as any Txn-Token, is critical to the security of the entire transaction invocation sequence. Only Txn-Tokens issued by a trusted Transaction Token Service may be trusted, so verification of the Txn-Token signature is required. For replacement transaction tokens, not only must the JWT signature be verified but also the workload identity of the workload requesting the replacement Txn-Token.<a href="#section-9.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scope-and-purpose-processing">
<section id="section-9.6">
        <h3 id="name-scope-and-purpose-processin">
<a href="#section-9.6" class="section-number selfRef">9.6. </a><a href="#name-scope-and-purpose-processin" class="section-name selfRef">Scope and Purpose processing</a>
        </h3>
<p id="section-9.6-1">The authorization model within a Trust Domain boundary is most often quite different from the authorization model (e.g. OAuth scopes) used with clients external to the Trust Domain. This makes managing unintentional scope increase a critical aspect of the Transaction Token Service. The TTS MUST ensure that the requested purpose (<code>scope</code>) of the Txn-Token is equal or less than the scope(s) identified in the <code>subject_token</code>. This is also true of requesting a replacement Txn-Token. The TTS MUST ensure there is no unintentional increase in authorization scope.<a href="#section-9.6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="identifying-a-transaction-throughout-a-call-chain">
<section id="section-9.7">
        <h3 id="name-identifying-a-transaction-t">
<a href="#section-9.7" class="section-number selfRef">9.7. </a><a href="#name-identifying-a-transaction-t" class="section-name selfRef">Identifying a Transaction Throughout a Call Chain</a>
        </h3>
<p id="section-9.7-1">A transaction token conveys user identity and authorization context across workloads in a call chain. The <code>txn</code> claim is a unique identifier that, when logged by the Transaction Token Service and workloads, enables discovery and auditing of successful and failed transactions. The <code>txn</code> value SHOULD be unique within the Trust Domain.<a href="#section-9.7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transaction-token-service-discovery">
<section id="section-9.8">
        <h3 id="name-transaction-token-service-d">
<a href="#section-9.8" class="section-number selfRef">9.8. </a><a href="#name-transaction-token-service-d" class="section-name selfRef">Transaction Token Service Discovery</a>
        </h3>
<p id="section-9.8-1">A workload may use various mechanisms to determine which instance of a Transaction Token Service to interact with. Workloads MUST retrieve configuration information from a trusted source to minimize the risk of a threat actor providing malicious configuration data that points to an instance of a Transaction Token Service under it's control. Such a service could be used to collect Access Tokens sent as part of the Transaction Token Request message.<a href="#section-9.8-1" class="pilcrow">¶</a></p>
<p id="section-9.8-2">To mitigate this risk, workloads SHOULD authenticate the service providing the configuration information and verify the integrity of the configuration information. This ensures that no unauthorized entity can insert or alter configuration data. The workload SHOULD use Transport Layer Security (TLS) to authenticate the endpoint and secure the communication channel. Additionally, application-layer signatures or message authentication codes MAY be used to detect any tampering with the configuration information.<a href="#section-9.8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="workload-configuration-protection">
<section id="section-9.9">
        <h3 id="name-workload-configuration-prot">
<a href="#section-9.9" class="section-number selfRef">9.9. </a><a href="#name-workload-configuration-prot" class="section-name selfRef">Workload Configuration Protection</a>
        </h3>
<p id="section-9.9-1">A deployment may include multiple instances of a Transaction Token Service to improve resiliency, reduce latency and enhance scalability. A workload may be configured to access more than one instance of a Transaction Token Service to ensure reliability or reduce latency for transaction token requests. The workload configuration should be protected against unauthorized addition or removal of Transaction Token Service instances. An attacker may perform a denial of service attack or degrade the performance of a system by removing an instance of a Transaction Token Service from the workload configuration.<a href="#section-9.9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transaction-token-service-authentication">
<section id="section-9.10">
        <h3 id="name-transaction-token-service-a">
<a href="#section-9.10" class="section-number selfRef">9.10. </a><a href="#name-transaction-token-service-a" class="section-name selfRef">Transaction Token Service Authentication</a>
        </h3>
<p id="section-9.10-1">A workload may accidently send a transaction token request to a service that is not a Transaction Token Service, or an attacker may attempt to impersonate a Transaction Token Service in order to gain access to transaction token requests which includes sensitive information like access tokens. To minimise the risk of leaking sensitive information like access tokens that are included in the transaction token request, the workload must ensure that it authenticates the Transaction Token Service and only contact instances of the Transaction Token Service that is authorized to issue transaction tokens.<a href="#section-9.10-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transaction-token-service-key-rotation">
<section id="section-9.11">
        <h3 id="name-transaction-token-service-k">
<a href="#section-9.11" class="section-number selfRef">9.11. </a><a href="#name-transaction-token-service-k" class="section-name selfRef">Transaction Token Service Key Rotation</a>
        </h3>
<p id="section-9.11-1">The Transaction Token Service may need to rotate signing keys. When doing so, it MAY adopt the key rotation practices in Section 10.1.1 of <span>[<a href="#OpenIdConnect" class="cite xref">OpenIdConnect</a>]</span>.<a href="#section-9.11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transaction-tokens-are-not-authentication-credentials">
<section id="section-9.12">
        <h3 id="name-transaction-tokens-are-not-">
<a href="#section-9.12" class="section-number selfRef">9.12. </a><a href="#name-transaction-tokens-are-not-" class="section-name selfRef">Transaction Tokens Are Not Authentication Credentials</a>
        </h3>
<p id="section-9.12-1">A workload MUST NOT use a transaction token to authenticate itself to another workload, service or the transaction token service. Transaction tokens represents information relevant to authorization decisions and are not workload identity credentials. Authentication between the workload and the transaction token service is described in [Mutual Authentication of the Txn-Token Request]{Mutual-Authentication-of-the-Txn-Token-Request}. The mechanisms used by workloads to authenticate to other workloads, services or system components is out of scope of this speicification.<a href="#section-9.12-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="Privacy">
<section id="section-10">
      <h2 id="name-privacy-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<div id="obfuscation-of-personal-information">
<section id="section-10.1">
        <h3 id="name-obfuscation-of-personal-inf">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-obfuscation-of-personal-inf" class="section-name selfRef">Obfuscation of Personal Information</a>
        </h3>
<p id="section-10.1-1">Some <code>rctx</code> and <code>tctx</code> claims may be considered personal information in some jurisdictions
and if so their values need to be obfuscated. For example, originating IP address
(<code>req_ip</code>) is often considered personal information and in that case must be
protected through some obfuscation method (e.g. salted SHA256).<a href="#section-10.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="logging">
<section id="section-10.2">
        <h3 id="name-logging">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-logging" class="section-name selfRef">Logging</a>
        </h3>
<p id="section-10.2-1">Complete Txn-Tokens must not be logged verbatim. This is in order to prevent replay of tokens or leakage of PII or other sensitive information via log files. A hash of the Txn-Token may be logged to allow for correlation with the log files of the Txn-Token Service that records issued tokens. Alternatively the JWS payload of a Txn-Token may be logged after the signature has been removed. If the Txn-Token contains PII, then care should be taken in logging the content of the Txn-Token so that the PII does not get logged.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="IANA">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">This specification registers the following token type identifiers to the "OAuth URI" subregistry of the "OAuth Parameters" <span>[<a href="#IANA.OAuth.Parameters" class="cite xref">IANA.OAuth.Parameters</a>]</span> registry. It also registers the following claims defined in Section <a href="#txn-token-claims" class="auto internal xref">Section 5.2</a> in the IANA JSON Web Token Claims Registry defined in <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>. It also registers the Media Type <span>[<a href="#IANA.MediaTypes" class="cite xref">IANA.MediaTypes</a>]</span> "txntoken+jwt" as defined in the section <a href="#txn-token-header" class="auto internal xref">Section 5.1</a>.<a href="#section-11-1" class="pilcrow">¶</a></p>
<div id="oauth-uri-subregistry-contents">
<section id="section-11.1">
        <h3 id="name-oauth-uri-subregistry-conte">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-oauth-uri-subregistry-conte" class="section-name selfRef">OAuth URI Subregistry Contents</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-11.1-1.1">
            <p id="section-11.1-1.1.1">URN: urn:ietf:params:oauth:token-type:txn_token<a href="#section-11.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.1-1.1.2.1">
                <p id="section-11.1-1.1.2.1.1">Common Name: Transaction Token<a href="#section-11.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.1.2.2">
                <p id="section-11.1-1.1.2.2.1">Change Controller: IETF<a href="#section-11.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.1.2.3">
                <p id="section-11.1-1.1.2.3.1">Specification Document Section <a href="#txn-token-request" class="auto internal xref">Section 7.1</a> of this specification<a href="#section-11.1-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-11.1-1.2">
            <p id="section-11.1-1.2.1">URN: urn:ietf:params:oauth:token-type:self_signed<a href="#section-11.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.1-1.2.2.1">
                <p id="section-11.1-1.2.2.1.1">Common Name: Token type for Self-signed JWT<a href="#section-11.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.2.2.2">
                <p id="section-11.1-1.2.2.2.1">Change Controller: IETF<a href="#section-11.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.2.2.3">
                <p id="section-11.1-1.2.2.3.1">Specification Document: Section <a href="#self-signed-subject-token-type" class="auto internal xref">Section 7.2.1</a> of this specification<a href="#section-11.1-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-11.1-1.3">
            <p id="section-11.1-1.3.1">URN: urn:ietf:params:oauth:token-type:unsigned_json<a href="#section-11.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.1-1.3.2.1">
                <p id="section-11.1-1.3.2.1.1">Common Name: Token type for Unsigned JSON Object<a href="#section-11.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.3.2.2">
                <p id="section-11.1-1.3.2.2.1">Change Controller: IETF<a href="#section-11.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.1-1.3.2.3">
                <p id="section-11.1-1.3.2.3.1">Specification Document: Section <a href="#unsigned-json-subject-token-type" class="auto internal xref">Section 7.2.2</a> of this specification<a href="#section-11.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="jwt-claims-registry-contents">
<section id="section-11.2">
        <h3 id="name-jwt-claims-registry-content">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-jwt-claims-registry-content" class="section-name selfRef">JWT Claims Registry Contents</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-11.2-1.1">
            <p id="section-11.2-1.1.1">Claim Name: <code>tctx</code><a href="#section-11.2-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.2-1.1.2.1">
                <p id="section-11.2-1.1.2.1.1">Claim Description: The transaction authorization details<a href="#section-11.2-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.1.2.2">
                <p id="section-11.2-1.1.2.2.1">Change Controller: IETF<a href="#section-11.2-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.1.2.3">
                <p id="section-11.2-1.1.2.3.1">Specification Document: Section <a href="#txn-token-claims" class="auto internal xref">Section 5.2</a> of this specification<a href="#section-11.2-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-11.2-1.2">
            <p id="section-11.2-1.2.1">Claim Name: <code>rctx</code><a href="#section-11.2-1.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.2-1.2.2.1">
                <p id="section-11.2-1.2.2.1.1">Claim Description: The requester context<a href="#section-11.2-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.2.2.2">
                <p id="section-11.2-1.2.2.2.1">Change Controller: IETF<a href="#section-11.2-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.2.2.3">
                <p id="section-11.2-1.2.2.3.1">Specification Document: Section <a href="#requester-context" class="auto internal xref">Section 5.2.2</a> of this specification<a href="#section-11.2-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="normal" id="section-11.2-1.3">
            <p id="section-11.2-1.3.1">Claim Name: <code>purp</code><a href="#section-11.2-1.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.2-1.3.2.1">
                <p id="section-11.2-1.3.2.1.1">Claim Description: The purpose of the transaction<a href="#section-11.2-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.3.2.2">
                <p id="section-11.2-1.3.2.2.1">Change Controller: IETF<a href="#section-11.2-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="normal" id="section-11.2-1.3.2.3">
                <p id="section-11.2-1.3.2.3.1">Specification Document: Section <a href="#txn-token-claims" class="auto internal xref">Section 5.2</a> of this specification<a href="#section-11.2-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
<div id="iana-media-type-registration-contents">
<section id="section-11.3">
        <h3 id="name-iana-media-type-registratio">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-iana-media-type-registratio" class="section-name selfRef">IANA Media Type Registration Contents</a>
        </h3>
<p id="section-11.3-1">The following entry will be proposed using the IANA Media Type registration <span>[<a href="#IANA.MediaTypes" class="cite xref">IANA.MediaTypes</a>]</span> form.<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.3-2.1">
            <p id="section-11.3-2.1.1">Type Name: application<a href="#section-11.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.2">
            <p id="section-11.3-2.2.1">Subtype Name: txntoken+jwt<a href="#section-11.3-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.3">
            <p id="section-11.3-2.3.1">Change Controller: IETF<a href="#section-11.3-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.4">
            <p id="section-11.3-2.4.1">Required Parameters: N/A.<a href="#section-11.3-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.5">
            <p id="section-11.3-2.5.1">Optional Parameters: N/A.<a href="#section-11.3-2.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.6">
            <p id="section-11.3-2.6.1">Encoding Considerations: 7-bit text<a href="#section-11.3-2.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.7">
            <p id="section-11.3-2.7.1">Security Considerations:<a href="#section-11.3-2.7.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-11.3-2.7.2">
<li id="section-11.3-2.7.2.1">
                <p id="section-11.3-2.7.2.1.1">The media type is used to identify JWTs that may be used as Transaction Tokens. It is a piece of data, and may not contain executable content.<a href="#section-11.3-2.7.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-11.3-2.7.2.2">
                <p id="section-11.3-2.7.2.2.1">Transaction Tokens are short-lived tokens used within a trusted environment, so there are no privacy considerations. Transaction Tokens are unmodifiable tokens, which need integrity protection.<a href="#section-11.3-2.7.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-11.3-2.7.2.3">
                <p id="section-11.3-2.7.2.3.1">The JWTs representing Transaction Tokens are signed, and therefore are integrity protected. A recipient of a Transaction Token must verify the signature on the Transaction Token before using it.<a href="#section-11.3-2.7.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-11.3-2.7.2.4">
                <p id="section-11.3-2.7.2.4.1">There are no additional security considerations specific to the use of JWTs as Transaction Tokens<a href="#section-11.3-2.7.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li id="section-11.3-2.7.2.5">
                <p id="section-11.3-2.7.2.5.1">The Transaction Tokens format does not require the use of links within the token. If links are used by specific instances of Transaction Tokens, then their interpretation is usage specific<a href="#section-11.3-2.7.2.5.1" class="pilcrow">¶</a></p>
</li>
            </ol>
</li>
          <li class="normal" id="section-11.3-2.8">
            <p id="section-11.3-2.8.1">Interoperability Considerations: Transaction Tokens inherit all interoperability properties of JWTs.<a href="#section-11.3-2.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.9">
            <p id="section-11.3-2.9.1">Published Specification: this document (when published)<a href="#section-11.3-2.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.10">
            <p id="section-11.3-2.10.1">Application Usage: Any application supporting the use of JWTs<a href="#section-11.3-2.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.11">
            <p id="section-11.3-2.11.1">Fragment Identifier Consideration: N/A.<a href="#section-11.3-2.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.12">
            <p id="section-11.3-2.12.1">Restrictions on Usage: Any application supporting the use of JWTs<a href="#section-11.3-2.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.13">
            <p id="section-11.3-2.13.1">Intended Usage: Common<a href="#section-11.3-2.13.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.3-2.14">
            <p id="section-11.3-2.14.1">Contact Person: Atul Tulshibagwale<a href="#section-11.3-2.14.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="http-header">
<section id="section-11.4">
        <h3 id="name-http-header">
<a href="#section-11.4" class="section-number selfRef">11.4. </a><a href="#name-http-header" class="section-name selfRef">HTTP Header</a>
        </h3>
<p id="section-11.4-1">The header name <code>Txn-Token</code> is proposed to be added to the HTTP Field Name Registry <span>[<a href="#IANA.HTTP.FieldNames" class="cite xref">IANA.HTTP.FieldNames</a>]</span> as an unstructured Header Field. This header is defined in the section <a href="#txn-token-http-header" class="auto internal xref">Section 8.1</a>. The following entry will be proposed in the HTTP Field Name Registry. Note that this is an unstructured field, therefore the value of the Type field is left empty:<a href="#section-11.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-11.4-2.1">
            <p id="section-11.4-2.1.1">Field Name: Txn-Token<a href="#section-11.4-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.4-2.2">
            <p id="section-11.4-2.2.1">Type:<a href="#section-11.4-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.4-2.3">
            <p id="section-11.4-2.3.1">Status: permanent<a href="#section-11.4-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.4-2.4">
            <p id="section-11.4-2.4.1">Specification Document: Section <a href="#txn-token-http-header" class="auto internal xref">Section 8.1</a> of this document<a href="#section-11.4-2.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-11.4-2.5">
            <p id="section-11.4-2.5.1">Comment: The <code>Authorization</code> header cannot be used for Txn-tokens because that may be used for service-to-service authorization, and the services may simultaneously require the use of Txn-tokens to convey detailed immutable information such as user identity and details of fine-grained authorization that are included in the Txn-token.<a href="#section-11.4-2.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8446">https://www.rfc-editor.org/rfc/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6749">[RFC6749]</dt>
        <dd>
<span class="refAuthor">Hardt, D., Ed.</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework"</span>, <span class="seriesInfo">RFC 6749</span>, <span class="seriesInfo">DOI 10.17487/RFC6749</span>, <time datetime="2012-10" class="refDate">October 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6749">https://www.rfc-editor.org/rfc/rfc6749</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6848">[RFC6848]</dt>
        <dd>
<span class="refAuthor">Winterbottom, J.</span>, <span class="refAuthor">Thomson, M.</span>, <span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Rosen, B.</span>, and <span class="refAuthor">R. George</span>, <span class="refTitle">"Specifying Civic Address Extensions in the Presence Information Data Format Location Object (PIDF-LO)"</span>, <span class="seriesInfo">RFC 6848</span>, <span class="seriesInfo">DOI 10.17487/RFC6848</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6848">https://www.rfc-editor.org/rfc/rfc6848</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7519">[RFC7519]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7519">https://www.rfc-editor.org/rfc/rfc7519</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7515">[RFC7515]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Signature (JWS)"</span>, <span class="seriesInfo">RFC 7515</span>, <span class="seriesInfo">DOI 10.17487/RFC7515</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7515">https://www.rfc-editor.org/rfc/rfc7515</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8693">[RFC8693]</dt>
        <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Nadalin, A.</span>, <span class="refAuthor">Campbell, B., Ed.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">C. Mortimore</span>, <span class="refTitle">"OAuth 2.0 Token Exchange"</span>, <span class="seriesInfo">RFC 8693</span>, <span class="seriesInfo">DOI 10.17487/RFC8693</span>, <time datetime="2020-01" class="refDate">January 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8693">https://www.rfc-editor.org/rfc/rfc8693</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8417">[RFC8417]</dt>
        <dd>
<span class="refAuthor">Hunt, P., Ed.</span>, <span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Denniss, W.</span>, and <span class="refAuthor">M. Ansari</span>, <span class="refTitle">"Security Event Token (SET)"</span>, <span class="seriesInfo">RFC 8417</span>, <span class="seriesInfo">DOI 10.17487/RFC8417</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8417">https://www.rfc-editor.org/rfc/rfc8417</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9068">[RFC9068]</dt>
        <dd>
<span class="refAuthor">Bertocci, V.</span>, <span class="refTitle">"JSON Web Token (JWT) Profile for OAuth 2.0 Access Tokens"</span>, <span class="seriesInfo">RFC 9068</span>, <span class="seriesInfo">DOI 10.17487/RFC9068</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9068">https://www.rfc-editor.org/rfc/rfc9068</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9110">[RFC9110]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9111">[RFC9111]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Caching"</span>, <span class="seriesInfo">STD 98</span>, <span class="seriesInfo">RFC 9111</span>, <span class="seriesInfo">DOI 10.17487/RFC9111</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9111">https://www.rfc-editor.org/rfc/rfc9111</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9651">[RFC9651]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span> and <span class="refAuthor">P. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="seriesInfo">RFC 9651</span>, <span class="seriesInfo">DOI 10.17487/RFC9651</span>, <time datetime="2024-09" class="refDate">September 2024</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9651">https://www.rfc-editor.org/rfc/rfc9651</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.HTTP.FieldNames">[IANA.HTTP.FieldNames]</dt>
        <dd>
<span class="refTitle">"HTTP Authentication Schemes"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.iana.org/assignments/http-fields/">https://www.iana.org/assignments/http-fields/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.OAuth.Parameters">[IANA.OAuth.Parameters]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"OAuth Parameters"</span>, <span>n.d.</span>, <span>&lt;<a href="https://www.iana.org/assignments/oauth-parameters">https://www.iana.org/assignments/oauth-parameters</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA.MediaTypes">[IANA.MediaTypes]</dt>
        <dd>
<span class="refAuthor">IANA</span>, <span class="refTitle">"Media Types"</span>, <span>n.d.</span>, <span>&lt;<a href="http://www.iana.org/assignments/media-types">http://www.iana.org/assignments/media-types</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OpenIdConnect">[OpenIdConnect]</dt>
      <dd>
<span class="refAuthor">Sakimura, N.</span>, <span class="refAuthor">Bradley, J.</span>, <span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Medeiros, B. de.</span>, and <span class="refAuthor">C. Mortimore</span>, <span class="refTitle">"OpenID Connect Core 1.0 incorporating errata set 2"</span>, <time datetime="2014-11" class="refDate">November 2014</time>, <span>&lt;<a href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net/specs/openid-connect-core-1_0.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="SPIFFE">[SPIFFE]</dt>
      <dd>
<span class="refAuthor">Cloud Native Computing Foundation</span>, <span class="refTitle">"Secure Production Identity Framework for Everyone"</span>, <span>n.d.</span>, <span>&lt;<a href="https://spiffe.io/docs/latest/spiffe-about/overview/">https://spiffe.io/docs/latest/spiffe-about/overview/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="Acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">The authors would like to thank the contributors and the OAuth working group members who gave valuable input to this draft.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="document-history">
<section id="appendix-B">
      <h2 id="name-document-history">
<a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="appendix-B-1">[[ To be removed from final specification ]]<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<div id="since-draft-06">
<section id="appendix-B.1">
        <h3 id="name-since-draft-06">
<a href="#name-since-draft-06" class="section-name selfRef">Since Draft 06</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.1-1.1">
            <p id="appendix-B.1-1.1.1">Remove definition of Authorization Context <a href="https://github.com/oauth-wg/oauth-transaction-tokens/issues/192">Be more specific on Authorization Context</a><a href="#appendix-B.1-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.1-1.2">
            <p id="appendix-B.1-1.2.1">Clarify that workloads should ensure it is communicating with a legitimate instance of a transaction token service (https://github.com/oauth-wg/oauth-transaction-tokens/issues/233)<a href="#appendix-B.1-1.2.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-05">
<section id="appendix-B.2">
        <h3 id="name-since-draft-05">
<a href="#name-since-draft-05" class="section-name selfRef">Since Draft 05</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1">
            <p id="appendix-B.2-1.1.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/173">Strengthened prohibition on expanding TraT scope</a><a href="#appendix-B.2-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.2">
            <p id="appendix-B.2-1.2.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/170">Clarified that TraTs can exceed request token lifetime, but cannot use expired tokens in request</a><a href="#appendix-B.2-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.3">
            <p id="appendix-B.2-1.3.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/160">Improved abstract for clarity</a><a href="#appendix-B.2-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.2-1.4">
            <p id="appendix-B.2-1.4.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/176">Clarified that the HTTP header Txn-Token is unstructured</a><a href="#appendix-B.2-1.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
<div id="since-draft-04">
<section id="appendix-B.3">
        <h3 id="name-since-draft-04">
<a href="#name-since-draft-04" class="section-name selfRef">Since Draft 04</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.3-1.1">
            <p id="appendix-B.3-1.1.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/153">Clarified Transaction Token Service discovery</a><a href="#appendix-B.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.2">
            <p id="appendix-B.3-1.2.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/148">Language improvements</a><a href="#appendix-B.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.3">
            <p id="appendix-B.3-1.3.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/150">Renamed azd claim to tctx claim</a><a href="#appendix-B.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.4">
            <p id="appendix-B.3-1.4.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/151">Fixed terminology captialization</a><a href="#appendix-B.3-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.5">
            <p id="appendix-B.3-1.5.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/156">Added key rotation guidance</a><a href="#appendix-B.3-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="appendix-B.3-1.6">
            <p id="appendix-B.3-1.6.1"><a href="https://github.com/oauth-wg/oauth-transaction-tokens/pull/157">Clarified text around external vs internal invocation</a><a href="#appendix-B.3-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="contributors">
<section id="appendix-C">
      <h2 id="name-contributors">
<a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dr. Kelley W. Burgin, PhD.</span></div>
<div dir="auto" class="left"><span class="org">MITRE Corporation</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kburgin@mitre.org" class="email">kburgin@mitre.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Campbell</span></div>
<div dir="auto" class="left"><span class="org">Ping Identity</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:bcampbell@pingidentity.com" class="email">bcampbell@pingidentity.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Evan Gilman</span></div>
<div dir="auto" class="left"><span class="org">SPIRL</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:evan@spirl.com" class="email">evan@spirl.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kai Lehmann</span></div>
<div dir="auto" class="left"><span class="org">1&amp;1 Mail &amp; Media Development &amp; Technology GmbH</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kai.lehmann@1und1.de" class="email">kai.lehmann@1und1.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Arndt Schwenkschuster</span></div>
<div dir="auto" class="left"><span class="org">SPIRL</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:arndts.ietf@gmail.com" class="email">arndts.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hannes Tschofenig</span></div>
<div dir="auto" class="left"><span class="org">Arm Ltd.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Hannes.Tschofenig@arm.com" class="email">Hannes.Tschofenig@arm.com</a>
</div>
</address>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Atul Tulshibagwale</span></div>
<div dir="auto" class="left"><span class="org">SGNL</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:atul@sgnl.ai" class="email">atul@sgnl.ai</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">George Fletcher</span></div>
<div dir="auto" class="left"><span class="org">Practical Identity LLC</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:george@practicalidentity.com" class="email">george@practicalidentity.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pieter Kasselman</span></div>
<div dir="auto" class="left"><span class="org">SPIRL</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pieter@spirl.com" class="email">pieter@spirl.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
